<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>CFO DMA Test GUI</title>
    <style>
        @import url(style.css);

        svg {
            width: 100%;
        }
    </style>
    <script src="/base/jquery.min.js"></script>
    <script src="/base/d3.v3.min.js"></script>
    <script src="/base/MakeGraph.js"></script>
    <script src="/base/AjaxPostAndGet.js"></script>
    <script src="DMATest.js"></script>
</head>
<body>
    <form>
        <fieldset>
            <legend>DMA I/O Rate Indicators</legend>
            <table>
                <tr>
                    <th>DMA Channel 0 (DAQ)</th>
                    <th>DMA Channel 1 (DCS)</th>
                </tr>
                <tr>
                    <td><p class="p" id="dma0"></p></td>
                    <td><p class="p" id="dma1"></p></td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>DMA Test Statistics</legend>
            <table>
                <tr>
                    <th>Tests Running</th>
                    <td><canvas id="testsRunning" width="20" height="10"></canvas></td>
                </tr>
            </table>
            <table>
                <tr>
                    <td>
                        <fieldset>
                            <legend>Register I/O</legend>
                            <table>
                                <tr>
                                    <th>Tests Passed</th>
                                    <th>Tests Failed</th>
                                    <th>Pass %</th>
                                </tr>
                                <tr>
                                    <td><input type="number" id="regPassed" readonly></td>
                                    <td><input type="number" id="regFailed" readonly></td>
                                    <td><input type="number" id="regPassPercent" readonly>%</td>
                                </tr>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td>
                        <fieldset>
                            <legend>PCIe State/Stats</legend>
                            <table>
                                <tr>
                                    <th>Tests Passed</th>
                                    <th>Tests Failed</th>
                                    <th>Pass %</th>
                                </tr>
                                <tr>
                                    <td><input type="number" id="pciePassed" readonly></td>
                                    <td><input type="number" id="pcieFailed" readonly></td>
                                    <td><input type="number" id="pciePassPercent" readonly>%</td>
                                </tr>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td>
                        <fieldset>
                            <legend>DMA State/Stats</legend>
                            <table>
                                <tr>
                                    <th>Tests Passed</th>
                                    <th>Tests Failed</th>
                                    <th>Pass %</th>
                                </tr>
                                <tr>
                                    <td><input type="number" id="dmaPassed" readonly></td>
                                    <td><input type="number" id="dmaFailed" readonly></td>
                                    <td><input type="number" id="dmaPassPercent" readonly>%</td>
                                </tr>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td>
                        <fieldset>
                            <legend>DAQ Channel</legend>
                            <table>
                                <tr>
                                    <th>PCIe C2S Rate</th>
                                    <th>PCIe S2C Rate</th>
                                    <th>Tests Passed</th>
                                    <th>Tests Failed</th>
                                    <th>Pass %</th>
                                </tr>
                                <tr>
                                    <td><input type="number" id="daqC2S" readonly></td>
                                    <td><input type="number" id="daqS2C" readonly></td>
                                    <td><input type="number" id="daqPassed" readonly></td>
                                    <td><input type="number" id="daqFailed" readonly></td>
                                    <td><input type="number" id="daqPassPercent" readonly>%</td>
                                </tr>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td>
                        <fieldset>
                            <legend>DCS Channel</legend>
                            <table>
                                <tr>
                                    <th>PCIe C2S Rate</th>
                                    <th>PCIe S2C Rate</th>
                                    <th>Tests Passed</th>
                                    <th>Tests Failed</th>
                                    <th>Pass %</th>
                                </tr>
                                <tr>
                                    <td><input type="number" id="dcsC2S" readonly></td>
                                    <td><input type="number" id="dcsS2C" readonly></td>
                                    <td><input type="number" id="dcsPassed" readonly></td>
                                    <td><input type="number" id="dcsFailed" readonly></td>
                                    <td><input type="number" id="dcsPassPercent" readonly>%</td>
                                </tr>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td>
                        <fieldset>
                            <legend>DAQ DMA Loopback</legend>
                            <table>
                                <tr>
                                    <th>Tests Passed</th>
                                    <th>Tests Failed</th>
                                    <th>Pass %</th>
                                </tr>
                                <tr>
                                    <td><input type="number" id="loopbackPassed" readonly></td>
                                    <td><input type="number" id="loopbackFailed" readonly></td>
                                    <td><input type="number" id="loopbackPassPercent" readonly>%</td>
                                </tr>
                            </table>
                        </fieldset>
                    </td>
                </tr>
            </table>
        </fieldset>
        <fieldset>
            <legend>DMA Test Parameters</legend>
            <table>
                <tr>
                    <th>Run Reg I/O Test</th>
                    <th>Run PCIe S/S Test</th>
                    <th>Run DMA S/S Test</th>
                    <th>Run DAQ Test</th>
                    <th>Run DCS Test</th>
                    <th>Run Loopback Test</th>
                    <th>Number of tests (-1 for continuous)</th>
                </tr>
                <tr>
                    <td><input type="checkbox" id="regEnabled"></td>
                    <td><input type="checkbox" id="pcieEnabled"></td>
                    <td><input type="checkbox" id="dmaEnabled"></td>
                    <td><input type="checkbox" id="daqEnabled" checked="checked"></td>
                    <td><input type="checkbox" id="dcsEnabled"></td>
                    <td><input type="checkbox" id="loopbackEnabled"></td>
                    <td><input type="number" id="numTests" value="1" min="-1" max="1000" step="1"></td>
                </tr>
            </table><br><br>
            <button type="button" id="runButton">Run Tests</button>
            <button type="button" id="resetButton">Reset Test Counters</button>
            <button type="button" id="stopButton">Stop Test</button>
        </fieldset>
    </form>
</body>
</html>